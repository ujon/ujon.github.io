<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="atom.xsl"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://ujon.github.io/blog</id>
    <title>ujon Blog</title>
    <updated>2025-12-26T00:00:00.000Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://ujon.github.io/blog"/>
    <subtitle>ujon Blog</subtitle>
    <icon>https://ujon.github.io/img/favicon.ico</icon>
    <entry>
        <title type="html"><![CDATA[[System Design] QR Order]]></title>
        <id>https://ujon.github.io/blog/20251226__qr_order</id>
        <link href="https://ujon.github.io/blog/20251226__qr_order"/>
        <updated>2025-12-26T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[Overview]]></summary>
        <content type="html"><![CDATA[<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="https://ujon.github.io/blog/20251226__qr_order#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">â€‹</a></h2>
<p>During a trip to the US, I had a great experience using a QR code ordering and payment system at a restaurant. Recently, I encountered the same system at a restaurant in Korea during lunch and decided to design it myself.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="requirements">Requirements<a href="https://ujon.github.io/blog/20251226__qr_order#requirements" class="hash-link" aria-label="Direct link to Requirements" title="Direct link to Requirements">â€‹</a></h2>
<ul>
<li>Customers can place orders by scanning a QR code</li>
<li>Each table has a unique QR code</li>
<li>Multiple customers at the same table can share a cart in real-time and order together</li>
<li>The kitchen can immediately view completed orders</li>
<li>Orders cannot be placed from outside the restaurant</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="system-design">System Design<a href="https://ujon.github.io/blog/20251226__qr_order#system-design" class="hash-link" aria-label="Direct link to System Design" title="Direct link to System Design">â€‹</a></h2>
<p><img decoding="async" loading="lazy" alt="system design" src="https://ujon.github.io/assets/images/20251226_qr_order-4e7e1879c520f646639e124373eb1f8a.png" width="1701" height="1071" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="websocket-server">Websocket Server<a href="https://ujon.github.io/blog/20251226__qr_order#websocket-server" class="hash-link" aria-label="Direct link to Websocket Server" title="Direct link to Websocket Server">â€‹</a></h3>
<p>Handles real-time communication and runs as a separate instance from the Client API and Admin API for load distribution.</p>
<p><strong>Key Features</strong></p>
<ul>
<li>Real-time cart synchronization between customers at the same table</li>
<li>Order notifications to kitchen devices</li>
</ul>
<p><strong>Implementation</strong></p>
<ul>
<li>Cart Synchronization<!-- -->
<ul>
<li>Uses Redis Pub/Sub to manage channels and support horizontal scaling.</li>
<li>Pub/Sub does not persist messages, which means there is a possibility of message loss. However, since cart data is ephemeral and can be re-synced during order confirmation, Streams is not used.</li>
</ul>
</li>
<li>Order Processing<!-- -->
<ul>
<li>Uses Redis Streams to ensure orders are reliably delivered to the kitchen.</li>
<li>Implements Consumer Groups to enable reprocessing in case of failures.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="client-api">Client API<a href="https://ujon.github.io/blog/20251226__qr_order#client-api" class="hash-link" aria-label="Direct link to Client API" title="Direct link to Client API">â€‹</a></h3>
<p>Provides APIs for customers.</p>
<p><strong>Key Features</strong></p>
<ul>
<li>Menu listing</li>
<li>Order submission</li>
</ul>
<p><strong>Implementation</strong></p>
<ul>
<li>Order Submission<!-- -->
<ul>
<li>Validates menu item consistency upon order submission. Applies Optimistic Locking to handle concurrency issues when menu items have limited availability.</li>
<li>Produces order messages to Redis Streams so the kitchen can receive them.</li>
</ul>
</li>
</ul>
<p><strong>Security Considerations</strong></p>
<p>The following validation logic is required to block orders from outside the restaurant:</p>
<ul>
<li>Client IP validation (verify the request originates from the restaurant's network)</li>
<li>GPS coordinate validation (calculate distance from the restaurant's location)</li>
<li>Combination of both conditions to prevent bypass attempts</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="admin-api">Admin API<a href="https://ujon.github.io/blog/20251226__qr_order#admin-api" class="hash-link" aria-label="Direct link to Admin API" title="Direct link to Admin API">â€‹</a></h3>
<p>Provides APIs for restaurant owners and staff.</p>
<p><strong>Key Features</strong></p>
<ul>
<li>Menu registration and management</li>
<li>Table-specific billing summary</li>
<li>Order status management</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sequence-diagram">Sequence Diagram<a href="https://ujon.github.io/blog/20251226__qr_order#sequence-diagram" class="hash-link" aria-label="Direct link to Sequence Diagram" title="Direct link to Sequence Diagram">â€‹</a></h2>
<p><img decoding="async" loading="lazy" alt="sequencediagram" src="https://ujon.github.io/assets/images/20251226_order_sq-b327ab5bb507e54959ad395deb67227c.svg" width="1335" height="2218" class="img_ev3q"></p>]]></content>
        <author>
            <name>ujon</name>
        </author>
        <category label="System Design" term="System Design"/>
    </entry>
    <entry>
        <title type="html"><![CDATA[[Project Structure] Spring Boot]]></title>
        <id>https://ujon.github.io/blog/20251201__project_structure__spring_boot</id>
        <link href="https://ujon.github.io/blog/20251201__project_structure__spring_boot"/>
        <updated>2025-12-18T00:00:00.000Z</updated>
        <summary type="html"><![CDATA[While working on personal projects, I have organized the project structure and architectural conventions that I frequently use in multi-module Spring Boot projects.]]></summary>
        <content type="html"><![CDATA[<p>While working on personal projects, I have organized the project structure and architectural conventions that I frequently use in multi-module Spring Boot projects.
This structure is designed based on a Layered Architecture inspired by Domain-Driven Design(DDD) concepts.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="project-structure">Project Structure<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#project-structure" class="hash-link" aria-label="Direct link to Project Structure" title="Direct link to Project Structure">â€‹</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{project}-server/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ .data/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ .docs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ .infra/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ database/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ migrations/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â””â”€â”€ v0.0.1__example.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ flyway.local.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ env/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ .env.local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”œâ”€â”€ terraform/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”œâ”€â”€ environments/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚   â””â”€â”€ {environment}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚       â”œâ”€â”€ main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â”‚       â””â”€â”€ variable.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â”‚   â””â”€â”€ modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ docker-compose.yml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ gradle</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ libs.versions.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ {project}-api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ src/main/kotlin/{project}/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ common/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ {path}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”‚   â”œâ”€â”€ request/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”‚   â”œâ”€â”€ response/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”‚   â”œâ”€â”€ {path}Controller.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”‚   â”œâ”€â”€ {path}Facade.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”‚   â””â”€â”€ {path}FacadeImpl.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â””â”€â”€ {project}Api.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ {project}-admin-api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ {project}-batch/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ src/main/kotlin/{project}/batch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ common/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ job/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ processor/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ scheduler/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ tasklet/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â””â”€â”€ {project}Batch.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ {project}-core/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ src/main/kotlin/{project}/core</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ {project}-domain/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚   â””â”€â”€ src/main/kotlin/{project}/domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚       â””â”€â”€ {domain}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ command/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ entity/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ exception/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ query/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ repository/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ vo/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â”œâ”€â”€ ${domain}Service.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”‚           â””â”€â”€ ${domain}ServiceImpl.kt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ infra/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ Makefile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ build.gradle.kts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â”œâ”€â”€ gradle.properties</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ settings.gradle.kts</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data">.data/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#data" class="hash-link" aria-label="Direct link to .data/" title="Direct link to .data/">â€‹</a></h3>
<p>Used as a volume-mounted data directory for Docker-based local infrastructure.
All files and subdirectories are excluded from version control via .gitignore.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docs">.docs/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#docs" class="hash-link" aria-label="Direct link to .docs/" title="Direct link to .docs/">â€‹</a></h3>
<p>Stores project-related documentation.
Files such as <code>howto.md</code>, <code>structure.md</code>, <code>dictionary.md</code>, and <code>history.md</code> are created to ensure that the project can be easily understood even after some time has passed.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="infra">.infra/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#infra" class="hash-link" aria-label="Direct link to .infra/" title="Direct link to .infra/">â€‹</a></h3>
<p>This directory contains all configurations required to manage infrastructure as code.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="database">database/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#database" class="hash-link" aria-label="Direct link to database/" title="Direct link to database/">â€‹</a></h4>
<p>Database schema migrations are managed using Flyway under the <code>migrations</code> directory.
Migration file naming conventions are defined through Flyway configuration.</p>
<div class="language-conf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-conf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">flyway.sqlMigrationPrefix=v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.sqlMigrationSeparator=__</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.sqlMigrationSuffixes=.sql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.baselineOnMigrate=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.baselineDescription=Initial baseline</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.baselineVersion=0.0.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.createSchemas=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway.table=flyway_schema_history</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="terraform">terraform/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#terraform" class="hash-link" aria-label="Direct link to terraform/" title="Direct link to terraform/">â€‹</a></h4>
<p>Cloud infrastructure is managed using Terraform.
The <code>environments/</code> directory contains environment-specific configurations, where <code>main.tf</code> defines the modules to be used and <code>variables.tf</code> declares required variables.</p>
<p>Reusable cloud service modules such as EC2, VPC, Security Group, and S3 are defined under the modules/ directory.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="docker-composeyml">docker-compose.yml<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#docker-composeyml" class="hash-link" aria-label="Direct link to docker-compose.yml" title="Direct link to docker-compose.yml">â€‹</a></h4>
<p>Managed using Docker Compose to quickly provision and run required infrastructure in the local development environment.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gradle">gradle/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#gradle" class="hash-link" aria-label="Direct link to gradle/" title="Direct link to gradle/">â€‹</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="libsversionstoml">libs.versions.toml<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#libsversionstoml" class="hash-link" aria-label="Direct link to libs.versions.toml" title="Direct link to libs.versions.toml">â€‹</a></h4>
<p>Uses Gradle Version Catalog to centrally manage versions of all libraries and plugins used across the project.</p>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[versions]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin = "2.1.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot = "3.5.5"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-dependency-management = "1.1.7"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">querydsl = "7.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mockk = "1.14.5"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">springmockk = "4.0.2"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">asciidoctor = "4.0.4"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jjwt = "0.13.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlinx-coroutines = "1.7.3"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mapstruct = "1.6.3"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[libraries]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Spring Boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-web = { module = "org.springframework.boot:spring-boot-starter-web", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-batch = { module = "org.springframework.boot:spring-boot-starter-batch", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-data-jpa = { module = "org.springframework.boot:spring-boot-starter-data-jpa", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-mail = { module = "org.springframework.boot:spring-boot-starter-mail", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-validation = { module = "org.springframework.boot:spring-boot-starter-validation", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-actuator = { module = "org.springframework.boot:spring-boot-starter-actuator", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-security = { module = "org.springframework.boot:spring-boot-starter-security", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot-starter-test = { module = "org.springframework.boot:spring-boot-starter-test", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-restdocs = { module = "org.springframework.restdocs:spring-restdocs-mockmvc", version = "3.0.5" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-restdocs-asciidoctor = { module = "org.springframework.restdocs:spring-restdocs-asciidoctor", version = "3.0.5" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Kotlin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#kotlin-stdlib = { module = "org.jetbrains.kotlin:kotlin-stdlib", version.ref = "kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-reflect = { module = "org.jetbrains.kotlin:kotlin-reflect", version.ref = "kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#kotlinx-coroutines-core = { module = "org.jetbrains.kotlinx:kotlinx-coroutines-core", version.ref = "kotlinx-coroutines" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#kotlinx-coroutines-reactor = { module = "org.jetbrains.kotlinx:kotlinx-coroutines-reactor", version.ref = "kotlinx-coroutines" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Jackson</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jackson-module-kotlin = { module = "com.fasterxml.jackson.module:jackson-module-kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">postgresql = { module = "org.postgresql:postgresql", version = "42.7.7" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># QueryDSL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">querydsl-core = { module = "io.github.openfeign.querydsl:querydsl-core", version.ref = "querydsl" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">querydsl-jpa = { module = "io.github.openfeign.querydsl:querydsl-jpa", version.ref = "querydsl" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">querydsl-apt = { module = "io.github.openfeign.querydsl:querydsl-apt", version.ref = "querydsl" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># OAuth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">google-oauth = { module = "com.google.auth:google-auth-library-oauth2-http", version = "1.38.0" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">google-api-client = { module = "com.google.api-client:google-api-client", version = "2.8.1" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># JWT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwt-api = { module = "io.jsonwebtoken:jjwt-api", version.ref = "jjwt" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwt-impl = { module = "io.jsonwebtoken:jjwt-impl", version.ref = "jjwt" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwt-jackson = { module = "io.jsonwebtoken:jjwt-jackson", version.ref = "jjwt" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Mapstruct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mapstruct = { module = "org.mapstruct:mapstruct", version.ref = "mapstruct" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mapstruct-processor = { module = "org.mapstruct:mapstruct-processor", version.ref = "mapstruct" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ETC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">uuid = { module = "com.fasterxml.uuid:java-uuid-generator", version = "5.1.0" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-test-junit5 = { module = "org.jetbrains.kotlin:kotlin-test-junit5" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mockk = { module = "io.mockk:mockk", version.ref = "mockk" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">springmockk = { module = "com.ninja-squad:springmockk", version.ref = "springmockk" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">junit-platform-launcher = { module = "org.junit.platform:junit-platform-launcher" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[bundles]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-web = ["spring-boot-starter-web", "spring-boot-starter-validation", "jackson-module-kotlin"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-batch = ["spring-boot-starter-batch"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-security = ["spring-boot-starter-security"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">health-check = ["spring-boot-starter-actuator"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-base = ["kotlin-reflect"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">test = ["spring-boot-starter-test", "kotlin-test-junit5", "mockk", "springmockk"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">infra-rdbms = ["spring-boot-starter-data-jpa", "querydsl-core", "querydsl-jpa"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jwt-runtime = ["jwt-impl", "jwt-jackson"]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[plugins]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-jvm = { id = "org.jetbrains.kotlin.jvm", version.ref = "kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-spring = { id = "org.jetbrains.kotlin.plugin.spring", version.ref = "kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-jpa = { id = "org.jetbrains.kotlin.plugin.jpa", version.ref = "kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kotlin-kapt = { id = "org.jetbrains.kotlin.kapt", version.ref = "kotlin" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-boot = { id = "org.springframework.boot", version.ref = "spring-boot" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">spring-dependency-management = { id = "io.spring.dependency-management", version.ref = "spring-dependency-management" }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">asciidoctor-jvm-convert = { id = "org.asciidoctor.jvm.convert", version.ref = "asciidoctor" }</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-api">{project}-api/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#project-api" class="hash-link" aria-label="Direct link to {project}-api/" title="Direct link to {project}-api/">â€‹</a></h3>
<p>Previously, the Presentation Layer (Controller) and Application Layer (Facade) were managed in separate packages, each defining its own DTOs and mapping logic.</p>
<p>However, as development progressed, I observed that this approach introduced excessive duplication of DTOs and mapping code.
In many cases, Controllers and Facades handled nearly identical request and response data, making the structure costly to maintain.</p>
<p>As a result, the current structure simplifies this by allowing Controllers and Facades to share Request and Response DTOs.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Previous</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{project}-api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ src/main/kotlin/{project}/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”œâ”€â”€ controller/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚   â””â”€â”€ {path}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚       â”œâ”€â”€ request/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â”‚       â””â”€â”€ response/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€â”€ facade/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â””â”€â”€ {path}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â”œâ”€â”€ input/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                â””â”€â”€ output/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Current</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{project}-api/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">â””â”€â”€ src/main/kotlin/{project}/api</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        â””â”€â”€ {path}/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â”œâ”€â”€ request/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            â””â”€â”€ response/</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="common">common<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#common" class="hash-link" aria-label="Direct link to common" title="Direct link to common">â€‹</a></h4>
<p>Manages components and objects shared across multiple modules, such as Filters, Exception Handlers, DTOs, and configuration properties.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="mapping">Mapping<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#mapping" class="hash-link" aria-label="Direct link to Mapping" title="Direct link to Mapping">â€‹</a></h4>
<p>In earlier Java-based Spring Boot projects, DTO mappings were handled using MapStruct with separate Mapper classes for each layer.
After transitioning to Kotlin Spring Boot, MapStruct often caused unclear mapping relationships and frequent compile-time or runtime errors, reducing its overall usability.</p>
<p>Currently, DTO mapping is handled using Kotlin extension functions, which are declared as <code>private</code> to limit their scope.
The naming convention for mapping functions follows the pattern <code>to{TargetDtoName}</code>.</p>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// MARK: - example</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">private</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">fun</span><span class="token plain"> CreateUserRequest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">toCreateUserCommand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">CreateUserCommand</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    email </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">email</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-batch">{project}-batch/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#project-batch" class="hash-link" aria-label="Direct link to {project}-batch/" title="Direct link to {project}-batch/">â€‹</a></h3>
<p>All packages, except common, define components strictly according to their directory name and responsibility.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="common-1">common/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#common-1" class="hash-link" aria-label="Direct link to common/" title="Direct link to common/">â€‹</a></h4>
<p>Contains shared Job configurations and Listener configurations used across batch jobs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="project-domain">{project}-domain/<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#project-domain" class="hash-link" aria-label="Direct link to {project}-domain/" title="Direct link to {project}-domain/">â€‹</a></h3>
<p>Previously, infrastructure modules (e.g., rdbms, redis, mongodb) were separated under an infra module and implemented by the domain module.</p>
<p>However, without a fully separated domain boundary, this approach increased complexity without providing sufficient benefits.
Therefore, the current design keeps infrastructure-related configurations within the domain module, with the intention of extracting them into separate modules once the service grows in size.</p>
<p>The <code>command</code> and <code>query</code> packages store DTOs for data mutation and data retrieval, respectively.
File naming follows the conventions <code>{name}Command.kt</code> and <code>{name}Query.kt</code>.</p>
<p>The entity package contains database entities, while the <code>vo</code> package stores enums and Value Objects used within entities.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="makefile">Makefile<a href="https://ujon.github.io/blog/20251201__project_structure__spring_boot#makefile" class="hash-link" aria-label="Direct link to Makefile" title="Direct link to Makefile">â€‹</a></h3>
<p>Centralizes frequently used commands such as starting and stopping Docker-based local infrastructure and executing Flyway schema migrations.</p>
<div class="language-Makefile language-makefile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-makefile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Environment Variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">include .env</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Get absolute project path</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">PROJECT_ROOT := $(shell pwd)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">INFRA_PATH := $(PROJECT_ROOT)/.infra</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">DATABASE_PATH := $(PROJECT_ROOT)/.infra/database</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MIGRATIONS_PATH := $(DATABASE_PATH)/migrations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">VOLUME_PATH := $(PROJECT_ROOT)/.data</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Environment file selection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV ?= local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENV_FILE := $(PROJECT_ROOT)/.infra/env/.env.$(ENV)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Load environment-specific file if exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ifneq (,$(wildcard $(ENV_FILE)))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	include $(ENV_FILE)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	export</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">endif</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.PHONY: help env-* flyway-* container-*</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">help: ## Show this help message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸ”§ Available Commands:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "====================="</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@awk 'BEGIN {FS = ":.*?## "; printf "\n"} /^[a-zA-Z_-]+:.*?## / {printf "  \033[36m%-20s\033[0m %s\n", $$1, $$2}' $(MAKEFILE_LIST)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo ""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸ“ Usage Examples:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "  make help                    # Show this help"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "  make env-show               # Show current environment"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "  make container-up           # Start services"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "  make ENV=prod container-up  # Start services with production config"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo ""</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸŒ Available Environments:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "  local (default), dev, prod"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">env-show: ## Show current environment variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸ“‹ Current Environment Variables:"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "================================="</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "Environment: $(ENV)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "Project Root: $(PROJECT_ROOT)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "DB Host: $(DB_HOST)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "DB Name: $(DB_NAME)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "Migrations Path: $(MIGRATIONS_PATH)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "Database Path Path: $(DATABASE_PATH)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "Volume Path: $(VOLUME_PATH)"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">env-validate: ## Validate required environment variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸ” Validating environment variables..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -n "$(DB_HOST)" || (echo "âŒ DB_HOST not set" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -n "$(DB_NAME)" || (echo "âŒ DB_NAME not set" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -n "$(DB_USERNAME)" || (echo "âŒ DB_USERNAME not set" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -n "$(DB_PASSWORD)" || (echo "âŒ DB_PASSWORD not set" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -d "$(MIGRATIONS_PATH)" || (echo "âŒ Migrations directory not found: $(MIGRATIONS_PATH)" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -d "$(DATABASE_PATH)" || (echo "âŒ Database directory not found: $(DATABASE_PATH)" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@test -d "$(VOLUME_PATH)" || (echo "âŒ Volume path not found: $(VOLUME_PATH)" &amp;&amp; exit 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "âœ… All required variables are set!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">volume-init: ## Initialize volume directories</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@mkdir $(VOLUME_PATH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@mkdir $(VOLUME_PATH)/postgresql</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@mkdir $(VOLUME_PATH)/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "âœ… Volume directories created!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Container runtime detection and variables</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONTAINER_RUNTIME ?= $(shell which podman &gt;/dev/null &amp;&amp; echo podman || echo docker)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Container up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">container-up: ## Start services with container runtime</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸ³ Starting services with $(CONTAINER_RUNTIME) ($(ENV))..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@$(CONTAINER_RUNTIME) compose \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		--env-file $(ENV_FILE) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		-f $(INFRA_PATH)/docker-compose.yml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		-p $(PROJECT) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		up -d</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Container down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">container-down: ## Stop all services</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "ğŸ›‘ Stopping services with $(CONTAINER_RUNTIME) ($(ENV))..."</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@$(CONTAINER_RUNTIME) compose \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		-f $(INFRA_PATH)/docker-compose.yml \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		-p $(PROJECT) \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		down</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">container-clean: ## Clean volumes and reinitialize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@rm -rf $(VOLUME_PATH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@$(MAKE) volume-init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "âœ… Volumes cleaned and reinitialized!"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">flyway-migrate: ## Run database migrations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo $(DATABASE_PATH)/flyway.local.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@$(CONTAINER_RUNTIME) run --rm \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		--network host \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		-v $(MIGRATIONS_PATH):/flyway/sql \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		-v $(DATABASE_PATH)/flyway.$(ENV).conf:/flyway/conf/flyway.conf \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		-e FLYWAY_URL="$(FLYWAY_URL)" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            -e FLYWAY_USER="$(FLYWAY_USER)" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            -e FLYWAY_PASSWORD="$(FLYWAY_PASSWORD)" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		-e FLYWAY_SCHEMAS="$(PROJECT)" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		-e FLYWAY_LOCATION="$(MIGRATIONS_PATH)" \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		flyway/flyway:11.11.2 \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    		migrate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	@echo "âœ… Database migrations completed!"</span><br></span></code></pre></div></div>]]></content>
        <author>
            <name>ujon</name>
        </author>
        <category label="Project Structure" term="Project Structure"/>
    </entry>
</feed>